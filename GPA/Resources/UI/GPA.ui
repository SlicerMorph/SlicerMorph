<?xml version='1.0' encoding='UTF-8'?>
<ui version="4.0">
  <class>GPAWidget</class>
  <widget class="QTabWidget" name="tabWidget">
    <property name="currentIndex">
      <number>0</number>
    </property>

    <!-- ===================== TAB 1: Setup Analysis (UNCHANGED) ===================== -->
    <widget class="QWidget" name="setupAnalysisTab">
      <attribute name="title">
        <string>Setup Analysis</string>
      </attribute>
      <layout class="QVBoxLayout" name="setupTabLayout">
        <item>
          <widget class="ctkCollapsibleButton" name="inbutton">
            <property name="collapsed"><bool>false</bool></property>
            <property name="text"><string>Setup Analysis</string></property>
            <layout class="QGridLayout" name="inputLayout">
              <item row="0" column="0" colspan="3">
                <widget class="QPushButton" name="LMbutton">
                  <property name="text"><string>Select Landmark Files ...</string></property>
                  <property name="toolTip"><string>Select one landmark file for each subject. Files must contain the identical number of landmark points.</string></property>
                </widget>
              </item>
              <item row="1" column="0" colspan="3">
                <widget class="ctkCollapsibleButton" name="fileViewerCollapsibleButton">
                  <property name="collapsed"><bool>true</bool></property>
                  <property name="text"><string>View selected landmark files</string></property>
                  <layout class="QVBoxLayout" name="fileViewerLayout">
                    <item>
                      <widget class="QTextEdit" name="inputFileTable">
                        <property name="readOnly"><bool>true</bool></property>
                      </widget>
                    </item>
                    <item>
                      <widget class="QPushButton" name="clearButton">
                        <property name="text"><string>Clear landmark file selections</string></property>
                        <property name="enabled"><bool>false</bool></property>
                        <property name="toolTip"><string>Clear the landmark files selected in the viewer boxes</string></property>
                      </widget>
                    </item>
                  </layout>
                </widget>
              </item>
              <item row="2" column="0">
                <widget class="QLabel" name="outLabel">
                  <property name="text"><string>Select output directory:</string></property>
                </widget>
              </item>
              <item row="2" column="1">
                <widget class="QLineEdit" name="outText"/>
              </item>
              <item row="2" column="2">
                <widget class="QPushButton" name="outputPathButton">
                  <property name="text"><string>...</string></property>
                </widget>
              </item>
              <item row="3" column="0">
                <widget class="QLabel" name="excludeLMLabel">
                  <property name="text"><string>Exclude landmarks:</string></property>
                </widget>
              </item>
              <item row="3" column="1" colspan="2">
                <widget class="QLineEdit" name="excludeLMText">
                  <property name="toolTip"><string>No spaces. Separate numbers by commas.  Example:  51,52</string></property>
                </widget>
              </item>
              <item row="4" column="0" colspan="3">
                <widget class="QCheckBox" name="BoasOptionCheckBox">
                  <property name="text"><string>Use Boas coordinates for GPA</string></property>
                  <property name="toolTip"><string>If checked, GPA will skip scaling.</string></property>
                </widget>
              </item>
              <item row="5" column="0" colspan="3">
                <widget class="ctkCollapsibleGroupBox" name="loadCovariatesCollapsibleButton">
                  <property name="collapsed"><bool>true</bool></property>
                  <property name="title"><string>Covariate options</string></property>
                  <layout class="QGridLayout" name="loadCovariatesLayout">
                    <item row="0" column="0">
                      <widget class="ctkCollapsibleGroupBox" name="generateCovariatesTableBox">
                        <property name="collapsed"><bool>false</bool></property>
                        <property name="title"><string>Generate new covariate table template</string></property>
                        <layout class="QHBoxLayout" name="generateCovariatesTableBoxLayout">
                          <item>
                            <widget class="QLabel" name="factorNamesLabel">
                              <property name="text"><string>Factor Names:</string></property>
                            </widget>
                          </item>
                          <item><widget class="QLineEdit" name="factorNames"/></item>
                          <item>
                            <widget class="QPushButton" name="generateCovariatesTableButton">
                              <property name="text"><string>Generate Template</string></property>
                              <property name="enabled"><bool>false</bool></property>
                              <property name="toolTip"><string>Create and open a new CSV format file to enter covariate data</string></property>
                            </widget>
                          </item>
                        </layout>
                      </widget>
                    </item>
                    <item row="1" column="0">
                      <widget class="ctkCollapsibleGroupBox" name="loadCovariatesTableBox">
                        <property name="collapsed"><bool>true</bool></property>
                        <property name="title"><string>Import covariates table to include in analysis</string></property>
                        <layout class="QHBoxLayout" name="loadCovariatesTableBoxLayout">
                          <item><widget class="QLabel" name="selectCovariatesLabel"><property name="text"><string>Select covariates table:</string></property></widget></item>
                          <item><widget class="QLineEdit" name="selectCovariatesText"/></item>
                          <item><widget class="QPushButton" name="selectCovariatesButton"><property name="text"><string>...</string></property></widget></item>
                        </layout>
                      </widget>
                    </item>
                  </layout>
                </widget>
              </item>
              <item row="6" column="0" colspan="3">
                <widget class="QPushButton" name="loadButton">
                  <property name="text"><string>Execute GPA + PCA</string></property>
                  <property name="enabled"><bool>false</bool></property>
                  <property name="toolTip"><string>Push to start the program. Make sure you have filled in all the data.</string></property>
                </widget>
              </item>
              <item row="7" column="0" colspan="3">
                <widget class="QPushButton" name="openResultsButton">
                  <property name="text"><string>View output files</string></property>
                  <property name="enabled"><bool>false</bool></property>
                  <property name="toolTip"><string>Push to open the folder where the GPA + PCA results are stored</string></property>
                </widget>
              </item>
            </layout>
          </widget>
        </item>

        <item>
          <widget class="ctkCollapsibleButton" name="loadFromFileCollapsibleButton">
            <property name="collapsed"><bool>true</bool></property>
            <property name="text"><string>Load previous analysis</string></property>
            <layout class="QGridLayout" name="loadFromFileLayout">
              <item row="0" column="0"><widget class="QLabel" name="resultsLabel"><property name="text"><string>Results Directory</string></property></widget></item>
              <item row="0" column="1"><widget class="QLineEdit" name="resultsText"/></item>
              <item row="0" column="2"><widget class="QPushButton" name="resultsButton"><property name="text"><string>...</string></property></widget></item>
              <item row="1" column="0" colspan="3">
                <widget class="QPushButton" name="loadResultsButton">
                  <property name="text"><string>Load GPA + PCA Analysis from File</string></property>
                  <property name="enabled"><bool>false</bool></property>
                  <property name="toolTip"><string>Select previous analysis from file and restore.</string></property>
                </widget>
              </item>
            </layout>
          </widget>
        </item>

        <item>
          <widget class="ctkCollapsibleButton" name="GPALogTextboxCollapsibleButton">
            <property name="collapsed"><bool>false</bool></property>
            <property name="text"><string>GPA Module Log Information</string></property>
            <layout class="QGridLayout" name="GPALogTextboxLayout">
              <item row="0" column="0"><widget class="QPlainTextEdit" name="GPALogTextbox"/></item>
            </layout>
          </widget>
        </item>
      </layout>
    </widget>

    <!-- ===================== TAB 2: Explore Data/Results (UNCHANGED) ===================== -->
    <widget class="QWidget" name="exploreDataResultsTab">
      <attribute name="title"><string>Explore Data/Results</string></attribute>
      <layout class="QVBoxLayout" name="exploreTabLayout">
        <item>
          <widget class="ctkCollapsibleButton" name="meanShapeFrame">
            <property name="collapsed"><bool>false</bool></property>
            <property name="text"><string>Mean Shape Plot Options</string></property>
            <layout class="QGridLayout" name="meanShapeLayout">
              <item row="1" column="1"><widget class="QLabel" name="meanButtonLabel"><property name="text"><string>Mean shape visibility:</string></property></widget></item>
              <item row="1" column="2"><widget class="QPushButton" name="plotMeanButton3D"><property name="text"><string>Toggle mean shape visibility</string></property><property name="enabled"><bool>false</bool></property></widget></item>
              <item row="2" column="1"><widget class="QLabel" name="meanLabelLabel"><property name="text"><string>Mean point label visibility:</string></property></widget></item>
              <item row="2" column="2"><widget class="QPushButton" name="showMeanLabelsButton"><property name="text"><string>Toggle label visibility</string></property><property name="enabled"><bool>false</bool></property><property name="toolTip"><string>Toggle visibility of mean point labels</string></property></widget></item>
              <item row="3" column="1"><widget class="QLabel" name="meanColorLabel"><property name="text"><string>Mean shape color:</string></property></widget></item>
              <item row="3" column="2"><widget class="ctkColorPickerButton" name="meanShapeColor"><property name="displayColorName"><bool>false</bool></property></widget></item>
              <item row="4" column="1"><widget class="QLabel" name="meanShapeSliderLabel"><property name="text"><string>Mean shape glyph scale</string></property></widget></item>
              <item row="4" column="2"><widget class="ctkSliderWidget" name="scaleMeanShapeSlider"><property name="toolTip"><string>Set scale for mean shape glyphs</string></property></widget></item>
            </layout>
          </widget>
        </item>

        <item>
          <widget class="ctkCollapsibleButton" name="distributionFrame">
            <property name="collapsed"><bool>false</bool></property>
            <property name="text"><string>Landmark Variance Plot Options</string></property>
            <layout class="QGridLayout" name="distributionLayout">
              <item row="2" column="1"><widget class="QLabel" name="ellipseTypeLabel"><property name="text"><string>Ellipse type</string></property></widget></item>
              <item row="2" column="2"><widget class="QRadioButton" name="EllipseType"><property name="checked"><bool>true</bool></property></widget></item>
              <item row="3" column="1"><widget class="QLabel" name="sphereTypeLabel"><property name="text"><string>Sphere type</string></property></widget></item>
              <item row="3" column="2"><widget class="QRadioButton" name="SphereType"/></item>
              <item row="4" column="1"><widget class="QLabel" name="cloudTypeLabel"><property name="text"><string>Point cloud type</string></property></widget></item>
              <item row="4" column="2"><widget class="QRadioButton" name="CloudType"/></item>
              <item row="5" column="1"><widget class="QLabel" name="noneTypeLabel"><property name="text"><string>None</string></property></widget></item>
              <item row="5" column="2"><widget class="QRadioButton" name="NoneType"/></item>
              <item row="7" column="1" colspan="4"><widget class="QPushButton" name="plotDistributionButton"><property name="text"><string>Plot LM variance</string></property><property name="enabled"><bool>false</bool></property><property name="toolTip"><string>Visualize variance of landmarks from all subjects</string></property></widget></item>
              <item row="6" column="1"><widget class="QLabel" name="varianceScaleLabel"><property name="text"><string>Scale Glyphs</string></property></widget></item>
              <item row="6" column="2"><widget class="ctkSliderWidget" name="scaleSlider"><property name="toolTip"><string>Set scale for variance visualization</string></property></widget></item>
            </layout>
          </widget>
        </item>

        <item>
          <widget class="ctkCollapsibleButton" name="plotFrame">
            <property name="collapsed"><bool>false</bool></property>
            <property name="text"><string>PCA Scatter Plot Options</string></property>
            <layout class="QGridLayout" name="plotLayout">
              <item row="1" column="1"><widget class="QLabel" name="Xlabel"><property name="text"><string>X Axis</string></property></widget></item>
              <item row="1" column="2" colspan="3"><widget class="QComboBox" name="XcomboBox"/></item>
              <item row="2" column="1"><widget class="QLabel" name="Ylabel"><property name="text"><string>Y Axis</string></property></widget></item>
              <item row="2" column="2" colspan="3"><widget class="QComboBox" name="YcomboBox"/></item>
              <item row="4" column="1"><widget class="QLabel" name="selectFactorLabel"><property name="text"><string>Select factor:</string></property></widget></item>
              <item row="4" column="2"><widget class="QComboBox" name="selectFactor">
                  <item><property name="text"><string>No factor data</string></property></item>
              </widget></item>
              <item row="5" column="1" colspan="5"><widget class="QPushButton" name="plotButton"><property name="text"><string>Scatter Plot</string></property><property name="enabled"><bool>false</bool></property></widget></item>
            </layout>
          </widget>
        </item>

        <!-- Lollipop Plot Options (RESTORED) -->
        <item>
          <widget class="ctkCollapsibleButton" name="lolliFrame">
            <property name="collapsed"><bool>false</bool></property>
            <property name="text"><string>Lollipop Plot Options</string></property>
            <layout class="QGridLayout" name="lolliLayout">
              <item row="1" column="1"><widget class="QLabel" name="vectorOneLabel"><property name="text"><string>Vector One: Red</string></property></widget></item>
              <item row="1" column="2" colspan="3"><widget class="QComboBox" name="vectorOne"/></item>
              <item row="2" column="1"><widget class="QLabel" name="vectorTwoLabel"><property name="text"><string>Vector Two: Green</string></property></widget></item>
              <item row="2" column="2" colspan="3"><widget class="QComboBox" name="vectorTwo"/></item>
              <item row="3" column="1"><widget class="QLabel" name="vectorThreeLabel"><property name="text"><string>Vector Three: Blue</string></property></widget></item>
              <item row="3" column="2" colspan="3"><widget class="QComboBox" name="vectorThree"/></item>
              <item row="4" column="2"><widget class="QCheckBox" name="TwoDType"><property name="text"><string>Lollipop 2D Projection</string></property></widget></item>
              <item row="6" column="1" colspan="6"><widget class="QPushButton" name="lolliButton"><property name="text"><string>Lollipop Vector Plot</string></property><property name="enabled"><bool>false</bool></property><property name="toolTip"><string>Plot PC vectors</string></property></widget></item>
            </layout>
          </widget>
        </item>
      </layout>
    </widget>

    <!-- ===================== TAB 3: Interactive 3D Visualization (UNCHANGED) ===================== -->
    <widget class="QWidget" name="visualizeTab">
      <attribute name="title"><string>Interactive 3D Visualization</string></attribute>
      <layout class="QVBoxLayout" name="visualizeTabLayout">
        <item>
          <widget class="ctkCollapsibleButton" name="selectTemplatesButton">
            <property name="collapsed"><bool>false</bool></property>
            <property name="text"><string>Setup Interactive Visualization</string></property>
            <layout class="QGridLayout" name="selectTemplatesLayout">
              <item row="0" column="0"><widget class="QLabel" name="landmarkVisualizationTypeLabel"><property name="text"><string>Mean shape visualization</string></property></widget></item>
              <item row="0" column="1"><widget class="QRadioButton" name="landmarkVisualizationType"><property name="checked"><bool>true</bool></property><property name="enabled"><bool>false</bool></property></widget></item>
              <item row="1" column="0"><widget class="QLabel" name="modelVisualizationTypeLabel"><property name="text"><string>3D model visualization</string></property></widget></item>
              <item row="1" column="1"><widget class="QRadioButton" name="modelVisualizationType"><property name="enabled"><bool>false</bool></property></widget></item>
              <item row="2" column="0"><widget class="QLabel" name="grayscaleSelectorLabel"><property name="text"><string>Specify reference model</string></property><property name="toolTip"><string>Load the model for the interactive visualization</string></property></widget></item>
              <item row="2" column="1"><widget class="ctkPathLineEdit" name="grayscaleSelector"/></item>
              <item row="3" column="0"><widget class="QLabel" name="FudSelectLabel"><property name="text"><string>Specify LM set for the selected model:</string></property><property name="toolTip"><string>Select the landmark set that corresponds to the reference model</string></property></widget></item>
              <item row="3" column="1"><widget class="ctkPathLineEdit" name="FudSelect"/></item>
              <item row="4" column="0" colspan="2"><widget class="QPushButton" name="selectorButton"><property name="text"><string>Apply</string></property><property name="enabled"><bool>false</bool></property></widget></item>
            </layout>
          </widget>
        </item>

        <item>
          <widget class="ctkCollapsibleButton" name="pcaVisualizationParametersButton">
            <property name="text"><string>PCA Visualization Parameters</string></property>
            <layout class="QGridLayout" name="pcaVisualizationParametersLayout">
              <item row="0" column="0"><widget class="QLabel" name="magnificationLabel"><property name="text"><string>Magnification Factor:</string></property></widget></item>
              <item row="0" column="1"><widget class="QDoubleSpinBox" name="spinMagnification"/></item>
              <item row="0" column="2"><widget class="QPushButton" name="updateMagnificationButton"><property name="text"><string>Update Magnification</string></property></widget></item>
              <item row="1" column="0" colspan="3">
                <layout class="QHBoxLayout" name="pcSelectionLayout">
                  <item><widget class="QComboBox" name="pcComboBox"/></item>
                  <item><widget class="QSlider" name="pcSlider"><property name="orientation"><enum>Qt::Horizontal</enum></property></widget></item>
                  <item><widget class="QDoubleSpinBox" name="pcSpinBox"/></item>
                </layout>
              </item>
            </layout>
          </widget>
        </item>

        <item>
          <widget class="ctkCollapsibleButton" name="animate">
            <property name="collapsed"><bool>false</bool></property>
            <property name="text"><string>Create animation of PC Warping</string></property>
            <layout class="QGridLayout" name="animateLayout">
              <item row="0" column="0"><widget class="QPushButton" name="startRecordButton"><property name="text"><string>Start Recording</string></property><property name="enabled"><bool>false</bool></property><property name="toolTip"><string>Start recording PCA warping applied manually using the slider bars.</string></property></widget></item>
              <item row="0" column="1"><widget class="QPushButton" name="stopRecordButton"><property name="text"><string>Stop Recording</string></property><property name="enabled"><bool>false</bool></property><property name="toolTip"><string>Stop recording PC warping and review recording in the Sequences module.</string></property></widget></item>
            </layout>
          </widget>
        </item>

        <item><widget class="QPushButton" name="resetButton"><property name="text"><string>Reset Scene</string></property><property name="toolTip"><string>Push to reset all fields.</string></property></widget></item>

        <item>
          <spacer name="verticalSpacerFinal">
            <property name="orientation"><enum>Qt::Vertical</enum></property>
            <property name="sizeHint" stdset="0"><size><width>20</width><height>40</height></size></property>
          </spacer>
        </item>
      </layout>
    </widget>

    <!-- ===================== TAB 4: Geomorph Linear Regression (NEW) ===================== -->
    <widget class="QWidget" name="geomorphLRTab">
      <attribute name="title"><string>Geomorph Linear Regression</string></attribute>
      <layout class="QVBoxLayout" name="geomorphLRTabLayout">

        <!-- Formula with buttons and validation -->
        <item>
          <widget class="QGroupBox" name="lrFormulaGroup">
            <property name="title"><string>R Formula</string></property>
            <layout class="QGridLayout" name="lrFormulaGrid">

              <!-- Row 0: Label + multi-line editor spanning full width -->
              <item row="0" column="0">
                <widget class="QLabel" name="lrFormulaLabel">
                  <property name="text"><string>Formula:</string></property>
                </widget>
              </item>
              <item row="0" column="1" colspan="4">
                <widget class="QPlainTextEdit" name="lrFormulaEdit">
                  <property name="minimumHeight"><number>120</number></property>
                  <property name="maximumHeight"><number>200</number></property>
                  <property name="toolTip"><string>Type an R-like formula (e.g., Coords ~ Size + Sex + Size:Sex). Use + for main effects and : for pairwise interactions. Add -1 to remove the intercept.</string></property>
                  <property name="placeholderText"><string>Coords ~ Size</string></property>
                </widget>
              </item>

              <!-- Row 1: Buttons underneath the formula -->
              <item row="1" column="1" colspan="3">
                <layout class="QHBoxLayout" name="lrButtonsRow">
                  <item>
                    <widget class="QPushButton" name="lrValidateButton">
                      <property name="text"><string>Validate</string></property>
                      <property name="toolTip"><string>Validate syntax and allowed terms (uses patsy).</string></property>
                    </widget>
                  </item>
                  <item>
                    <widget class="QPushButton" name="lrCopyButton">
                      <property name="text"><string>Copy</string></property>
                      <property name="toolTip"><string>Copy current formula to clipboard.</string></property>
                    </widget>
                  </item>
                  <item>
                    <widget class="QPushButton" name="lrResetButton">
                      <property name="text"><string>Reset to “Coords ~ Size”</string></property>
                    </widget>
                  </item>
                  <item>
                    <spacer name="lrButtonsSpacer">
                      <property name="orientation"><enum>Qt::Horizontal</enum></property>
                      <property name="sizeHint" stdset="0"><size><width>40</width><height>10</height></size></property>
                    </spacer>
                  </item>
                </layout>
              </item>

              <!-- Row 2: Status line -->
              <item row="2" column="0">
                <widget class="QLabel" name="lrStatusLabelTitle">
                  <property name="text"><string>Status:</string></property>
                </widget>
              </item>
              <item row="2" column="1" colspan="4">
                <widget class="QLabel" name="lrStatusLabel">
                  <property name="text"><string>Waiting for input…</string></property>
                  <property name="wordWrap"><bool>true</bool></property>
                </widget>
              </item>

              <!-- Row 3: Tip (tight margins) -->
              <item row="3" column="1" colspan="4">
                <widget class="QLabel" name="lrHelpLabel">
                  <property name="text">
                    <string>Tip: Start typing and pick from suggestions. Allowed operators: “+” (add), “:” (interaction), “-1” (remove intercept). LHS should be “Coords”.</string>
                  </property>
                  <property name="wordWrap"><bool>true</bool></property>
                  <property name="styleSheet">
                    <string notr="true">margin-top:2px;margin-bottom:2px;</string>
                  </property>
                </widget>
              </item>

            </layout>
          </widget>
        </item>

        <!-- Reference list: mains (read-only) -->
        <item>
          <widget class="QGroupBox" name="lrReferenceGroup">
            <property name="title"><string>Possible Main Effect Terms</string></property>
            <layout class="QGridLayout" name="lrReferenceGrid">
              <property name="leftMargin"><number>6</number></property>
              <property name="topMargin"><number>2</number></property>
              <property name="rightMargin"><number>6</number></property>
              <property name="bottomMargin"><number>6</number></property>
              <property name="verticalSpacing"><number>2</number></property>
              <item row="0" column="0">
                <widget class="QLabel" name="lrPossibleLabel">
                  <property name="text">
                    <string>These Covariates (including “Size”) are valid in formulas:</string>
                  </property>
                  <property name="styleSheet">
                    <string notr="true">margin:0px;padding:0px;</string>
                  </property>
                  <property name="sizePolicy">
                    <sizepolicy hsizetype="Preferred" vsizetype="Minimum"/>
                  </property>
                </widget>
              </item>
              <item row="1" column="0">
                <widget class="QListWidget" name="lrPossibleCovariatesList">
                  <property name="selectionMode"><enum>QAbstractItemView::NoSelection</enum></property>
                  <property name="dragDropMode"><enum>QAbstractItemView::NoDragDrop</enum></property>
                  <property name="alternatingRowColors"><bool>true</bool></property>
                  <property name="maximumHeight"><number>220</number></property>
                </widget>
              </item>
            </layout>
          </widget>
        </item>

        <!-- NEW: R / Rserve Bridge (unchanged UI from your current) -->
        <item>
          <widget class="QGroupBox" name="rserveGroup">
            <property name="title"><string>R / Rserve Bridge</string></property>
            <layout class="QGridLayout" name="rserveGrid">
              <property name="leftMargin"><number>6</number></property>
              <property name="topMargin"><number>6</number></property>
              <property name="rightMargin"><number>6</number></property>
              <property name="bottomMargin"><number>6</number></property>
              <property name="verticalSpacing"><number>6</number></property>

              <item row="0" column="0"><widget class="QLabel" name="rscriptPathLabel"><property name="text"><string>Rscript path:</string></property></widget></item>
              <item row="0" column="1" colspan="2"><widget class="ctkPathLineEdit" name="rscriptPath"/></item>
              <item row="0" column="3"><widget class="QPushButton" name="rDetectButton"><property name="text"><string>Auto-detect</string></property></widget></item>

              <item row="1" column="0"><widget class="QLabel" name="rPortLabel"><property name="text"><string>Rserve port:</string></property></widget></item>
              <item row="1" column="1"><widget class="QSpinBox" name="rPortSpin"><property name="value"><number>6311</number></property></widget></item>
              <item row="1" column="2"><widget class="QCheckBox" name="rAllowRemote"><property name="text"><string>Enable remote</string></property></widget></item>
              <item row="1" column="3"><widget class="QPushButton" name="rRefreshButton"><property name="text"><string>Refresh status</string></property></widget></item>

              <item row="2" column="0"><widget class="QLabel" name="rGeomorphTitle"><property name="text"><string>geomorph:</string></property></widget></item>
              <item row="2" column="1" colspan="2"><widget class="QLabel" name="rGeomorphStatusLabel"><property name="text"><string>Unknown</string></property></widget></item>
              <item row="2" column="3"><widget class="QPushButton" name="rCheckGeomorphButton"><property name="text"><string>Check</string></property></widget></item>

              <item row="3" column="0"><widget class="QPushButton" name="rLaunchButton"><property name="text"><string>Launch Rserve</string></property></widget></item>
              <item row="3" column="1"><widget class="QPushButton" name="rConnectButton"><property name="text"><string>Connect</string></property></widget></item>
              <item row="3" column="2"><widget class="QPushButton" name="rDisconnectButton"><property name="text"><string>Disconnect</string></property></widget></item>
              <item row="3" column="3"><widget class="QPushButton" name="rShutdownButton"><property name="text"><string>Shutdown Rserve</string></property></widget></item>

              <item row="4" column="0"><widget class="QLabel" name="rExeTitle"><property name="text"><string>Rscript:</string></property></widget></item>
              <item row="4" column="1" colspan="3"><widget class="QLabel" name="rExeStatusLabel"><property name="text"><string>Not checked</string></property></widget></item>

              <item row="5" column="0"><widget class="QLabel" name="rRserveTitle"><property name="text"><string>Rserve:</string></property></widget></item>
              <item row="5" column="1" colspan="3"><widget class="QLabel" name="rRserveStatusLabel"><property name="text"><string>Unknown</string></property></widget></item>

              <item row="6" column="0"><widget class="QLabel" name="rConnTitle"><property name="text"><string>Connection:</string></property></widget></item>
              <item row="6" column="1" colspan="3"><widget class="QLabel" name="rConnStatusLabel"><property name="text"><string>Not connected</string></property></widget></item>
            </layout>
          </widget>
        </item>

        <!-- NEW: Fit Model area -->
        <item>
          <widget class="QGroupBox" name="lrRunGroup">
            <property name="title"><string>Fit model (Rserve)</string></property>
            <layout class="QGridLayout" name="lrRunGrid">
              <item row="0" column="0" colspan="2">
                <widget class="QLabel" name="lrFitPrereqLabel">
                  <property name="text"><string>Requires: valid formula + Rserve connected</string></property>
                </widget>
              </item>
              <item row="1" column="0">
                <widget class="QPushButton" name="lrFitButton">
                  <property name="text"><string>Fit model in R (procD.lm)</string></property>
                  <property name="enabled"><bool>false</bool></property>
                  <property name="toolTip"><string>Fits the current formula in R using geomorph::procD.lm</string></property>
                </widget>
              </item>
              <item row="1" column="1">
                <widget class="QLabel" name="lrFitStatusLabel">
                  <property name="text"><string>Idle</string></property>
                </widget>
              </item>
            </layout>
          </widget>
        </item>

        <item>
          <spacer name="lrSpacer">
            <property name="orientation"><enum>Qt::Vertical</enum></property>
            <property name="sizeHint" stdset="0"><size><width>20</width><height>20</height></size></property>
          </spacer>
        </item>
      </layout>
    </widget>

  </widget>
  <resources/>
  <connections/>
</ui>
